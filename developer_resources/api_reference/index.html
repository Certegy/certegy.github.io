<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>API Reference - Oxipay Documentation</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "API Reference";
    var mkdocs_page_input_path = "developer_resources\api_reference.md";
    var mkdocs_page_url = "/developer_resources/api_reference/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Oxipay Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Platforms</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../platforms/shopify/">Shopify</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../platforms/woocommerce/">WooCommerce</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../platforms/magento_1/">Magento 1</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../platforms/magento_2/">Magento 2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../platforms/onestep/">OneStep</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developer Resources</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../introduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../checkout_process/">Checkout Process</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">API Reference</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#mapfrom-method">MapFrom() Method</a></li>
                
            
                <li class="toctree-l3"><a href="#checkout-controller">Checkout Controller</a></li>
                
                    <li><a class="toctree-l4" href="#postindex-method">PostIndex() Method</a></li>
                
                    <li><a class="toctree-l4" href="#getindex-method">GetIndex() Method</a></li>
                
                    <li><a class="toctree-l4" href="#processinstore-method">ProcessInstore() Method</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../signature_generation/">Signature Generation</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Marketing & Advertising</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guidelines/banner-adverts/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guidelines/installing-simple/">Installing the Simple Way</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guidelines/installing-complex/">Installing the Complex Way</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guidelines/banners/">Banners and Tags list</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Oxipay Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Developer Resources &raquo;</li>
        
      
    
    <li>API Reference</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="mapfrom-method"><code>MapFrom()</code> Method</h2>
<p>As its name implies, the <code>MapFrom()</code> methods maps a request object that is passed to it from the shopping cart from the <code>IHttpRequest</code> format into the <code>XpAuthRequest</code>.</p>
<p>The <code>IHttpRequest</code> request object that is passed to the <code>MapFrom()</code> method represents the transaction payload that contains the various transaction specific details such as the transaction amount, a customer's biling country and the shop's name (merchant's name as advertised on the internet and other media).</p>
<p>Below is a table that summarises the various information that the translation layer expects to be within the request:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>x_currency</td>
<td>Currency in which the transaction was processed, typically AUD.</td>
</tr>
<tr>
<td>x_url_complete</td>
<td>URL that users are re-directed to when a transaciton has processed successfully.</td>
</tr>
<tr>
<td>x_url_callback</td>
<td>Callback URL that is re-directed after the API method has been called</td>
</tr>
<tr>
<td>x_url_cancel</td>
<td>URL that users are re-directed to when they cancel a transaction.</td>
</tr>
<tr>
<td><strong>Merchant Specific</strong></td>
<td></td>
</tr>
<tr>
<td>x_shop_name</td>
<td>The merchant's or business' name as advertised on the Internet, TV and other media</td>
</tr>
<tr>
<td>x_account_id</td>
<td>The merchant's ID, this is unique to every merchant</td>
</tr>
<tr>
<td>x_reference</td>
<td>Rerference for that particular transaction</td>
</tr>
<tr>
<td>x_invoice</td>
<td>Transaction's invoice</td>
</tr>
<tr>
<td><strong>Order Specific</strong></td>
<td></td>
</tr>
<tr>
<td>x_amount</td>
<td>Total amount for that transaction including any shipping costs and taxes such as GST</td>
</tr>
<tr>
<td><strong>Customer Specific</strong></td>
<td></td>
</tr>
<tr>
<td>x_customer_first_name</td>
<td>Customer's first name</td>
</tr>
<tr>
<td>x_customer_last_name</td>
<td>Customer's last name</td>
</tr>
<tr>
<td>x_customer_email</td>
<td>Customer's email address</td>
</tr>
<tr>
<td>x_customer_phone</td>
<td>Customer's phone number (could also be their mobile)</td>
</tr>
<tr>
<td>x_customer_billing_address1</td>
<td>Customer's billing address - line 1</td>
</tr>
<tr>
<td>x_customer_billing_address2</td>
<td>Customer's billing address - line 2</td>
</tr>
<tr>
<td>x_customer_billing_city</td>
<td>Customer's billing city</td>
</tr>
<tr>
<td>x_customer_billing_state</td>
<td>Customer's billing state</td>
</tr>
<tr>
<td>x_customer_billing_zip</td>
<td>Customer's billing zip code</td>
</tr>
<tr>
<td>x_customer_billing_address1</td>
<td>Customer's billing address - line 1</td>
</tr>
<tr>
<td>x_customer_billing_address2</td>
<td>Customer's billing address - line 2</td>
</tr>
<tr>
<td>x_customer_billing_city</td>
<td>Customer's billing city</td>
</tr>
<tr>
<td>x_customer_billing_state</td>
<td>Customer's billing state</td>
</tr>
<tr>
<td>x_customer_billing_zip</td>
<td>Customer's billing zip code</td>
</tr>
<tr>
<td>x_customer_shipping_address1</td>
<td>Customer's shipping address - line 1</td>
</tr>
<tr>
<td>x_customer_shipping_address2</td>
<td>Customer's shipping address - line 2</td>
</tr>
<tr>
<td>x_customer_shipping_city</td>
<td>Customer's shipping city</td>
</tr>
<tr>
<td>x_customer_shipping_state</td>
<td>Customer's shipping state</td>
</tr>
<tr>
<td>x_customer_shipping_zip</td>
<td>Customer's shipping zip code</td>
</tr>
<tr>
<td><strong>Gateway Specific</strong></td>
<td></td>
</tr>
<tr>
<td>x_test</td>
<td>A flag that indicates whether the transaction is to be processed as a live transaction or as a test transaction. No actual dollar amounts are debitted when the test flag is enabled.</td>
</tr>
</tbody>
</table>
<ul>
<li>An input stream of type <code>Stream</code></li>
<li>A query string that is a name value collection, type <code>NameValueCollection</code></li>
</ul>
<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>Modifier</th>
      <th>Method and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>public</code></td>
      <td>
      <code>MapFrom()</code>
      <br>
      Maps a request from type <code>IHttpRequest</code> to type <code>XpAuthRequest</code>.
      </td>
    </tr>
    <tr>
      <td><code>public</code></td>
      <td><code>Logout</code>
      <br>
      Processes a log out request of type <code>LougoutRequest</code>. Returns an <code>Invalid Logout Request</code> if the log out request is null, whitespace or is the default value.</td>
      </td>
    </tr>
  </tbody>
</table>

<h1 id="checkout-controller">Checkout Controller</h1>
<h2 id="postindex-method"><code>PostIndex()</code> Method</h2>
<table>
<thead>
<tr>
<th>Modifier and Type</th>
<th>Method Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>public async Task &lt; ActionResult &gt;</code></td>
<td><code>PostIndex()</code></td>
</tr>
</tbody>
</table>
<p>The <code>PostIndex()</code> method returns an Oxipay specific checkout URL to which the shopping cart can post the transaction to. It is a public asynchronous method as specified by the method's <code>public async</code> modifier and type.</p>
<p>For the <code>PostIndex()</code> method to return a valid checkout URL, the shopping cart's platform would need to be authenticated successfully based on the calling platform's authentication rules. This involves successfully verifying the signature as well as the merchant number that is being passed and the <code>httpRequest</code> itself.</p>
<p>Failure to successfully authenticate  the request will result in being re-directed to a <code>401</code> error page with a <code>Signature Invalid</code> message.</p>
<p>Also note that Oxipay might re-direct to an error page if the request was authenticated but was not authorised after being posted to the Authorisation API. The error page will include both a code and a description message for that particular failed authorisaiton.</p>
<p>If an exception occurs, then the method will also re-direct to an error page that includes a code and a message for that particular error.</p>
<h2 id="getindex-method"><code>GetIndex()</code> Method</h2>
<p>Returns the current view.</p>
<h2 id="processinstore-method"><code>ProcessInstore()</code> Method</h2>
<p>The <code>ProcessInstore()</code> method will use the transaciton ID that is passed to it to return URL for processing an instore transaction - normally created from within the Oxipay merchant portal - as opposed to transactions created from within a shopping cart.</p>
<p>A transaction ID of <code>0</code> will result in an instance of the <code>HttpNotFoundResult</code> class being return with the message <code>Transaction Not Found</code></p>
<p>The method does a post to the Authorisation API and if the result of the authorisation is an error that it will redirect to a page the includes the code of the error as well as a message relating to it.</p>
<p>Note that the method will throw an exception that redirects to a generic error page.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../signature_generation/" class="btn btn-neutral float-right" title="Signature Generation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../checkout_process/" class="btn btn-neutral" title="Checkout Process"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../checkout_process/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../signature_generation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
