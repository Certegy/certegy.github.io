<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>API Documentation - Oxipay Documentation</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/styles.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Oxipay Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Platforms <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../platforms/shopify/">Shopify</a>
</li>

                    
                        
<li >
    <a href="../../platforms/woocommerce/">WooCommerce</a>
</li>

                    
                        
<li >
    <a href="../../platforms/magento_1/">Magento 1</a>
</li>

                    
                        
<li >
    <a href="../../platforms/magento_2/">Magento 2</a>
</li>

                    
                        
<li >
    <a href="../../platforms/onestep/">OneStep</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Resources <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../how-it-works/">How it works</a>
</li>

                    
                        
<li >
    <a href="../gateway-signing-mechanism/">Gateway Signing Mechanism</a>
</li>

                    
                        
<li class="active">
    <a href="./">API Documentation</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Marketing & Advertising <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../guidelines/banner-adverts/">Introduction</a>
</li>

                    
                        
<li >
    <a href="../../guidelines/installing-simple/">Installing the Simple Way</a>
</li>

                    
                        
<li >
    <a href="../../guidelines/installing-complex/">Installing the Complex Way</a>
</li>

                    
                        
<li >
    <a href="../../guidelines/banners/">Banners and Tags list</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../gateway-signing-mechanism/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../guidelines/banner-adverts/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#api-documentation">API Documentation</a></li>
        
    
        <li class="main "><a href="#api-documentation_1">API Documentation</a></li>
        
            <li><a href="#mapfrom">MapFrom()</a></li>
        
    
        <li class="main "><a href="#checkout-controller">Checkout Controller</a></li>
        
            <li><a href="#postindex-method">PostIndex() Method</a></li>
        
            <li><a href="#getindex-method">GetIndex() Method</a></li>
        
            <li><a href="#processinstore-method">ProcessInstore() Method</a></li>
        
    
        <li class="main "><a href="#login">Login</a></li>
        
            <li><a href="#constructor-summary">Constructor Summary</a></li>
        
            <li><a href="#method-summary">Method Summary</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="api-documentation">API Documentation</h1>
<p>This is a complete guide to the Oxipay API. The API allows you to quickly integrate Oxipay as a payment gateway into your choice of eCommerce solutions. We've already used this API to integrate Oxipay into a number of leading eCommerce solutions including Shopify, WooCommerce and Magento.</p>
<h1 id="api-documentation_1">API Documentation</h1>
<p>Integrating Oxipay as a payment gateway into a shopping cart platform involves defining a translation layer that is specific to that platform.</p>
<h2 id="mapfrom">MapFrom()</h2>
<p>The <code>MapFrom()</code> methods maps a request object from type IHttpRequest to type XpAuthRequest. The request object has two properties:</p>
<ul>
<li>An input stream of type <code>Stream</code></li>
<li>A query string that is a name value collection, type <code>NameValueCollection</code></li>
</ul>
<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>Modifier</th>
      <th>Method and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>public</code></td>
      <td>
      <code>MapFrom()</code>
      <br>
      Maps a request from type <code>IHttpRequest</code> to type <code>XpAuthRequest</code>.
      </td>
    </tr>
    <tr>
      <td><code>public</code></td>
      <td><code>Logout</code>
      <br>
      Processes a log out request of type <code>LougoutRequest</code>. Returns an <code>Invalid Logout Request</code> if the log out request is null, whitespace or is the default value.</td>
      </td>
    </tr>
  </tbody>
</table>

<h1 id="checkout-controller">Checkout Controller</h1>
<h2 id="postindex-method"><code>PostIndex()</code> Method</h2>
<p>The method will initially attempt to verify the payload's signature and will also attempt to authenticate the request based on the merchant number that is being passed as well as the httpRequest. If it is unable to verify the payload's signature or unable to authenticate the request, then it will re-direct to a 401 error page with a <em>Signature Invalid</em> error message.</p>
<p>Otherwise it will post to the authorisation API. If there is an error in processing the authentication request, then it will re-direct the user to an error page that includes the code and a descriptive message corresponding to that particular error.</p>
<p>Additionally if the result of the post to the authorisation API is a valid result, then it will append an Oxipay specific transaction id to the URL, otherwise, it will append -1.</p>
<p>Note that the Oxipay transaction id is different to the transaction id that might be referenced in your shopping platform.</p>
<p>If an exception is thrown as a result of a failed authentication reuqest, then based on the result of the failed authentication request, will re-direct the user to a page that includes the code and a message of that particular failed authentication.</p>
<p>Also note that the <code>PostIndex()</code> method is an asynchronous method as specified by the method's <code>public async</code> return type.</p>
<h2 id="getindex-method"><code>GetIndex()</code> Method</h2>
<p>Returns the current view.</p>
<h2 id="processinstore-method"><code>ProcessInstore()</code> Method</h2>
<p>The <code>ProcessInstore()</code> method will use the transaciton ID that is passed to it to return URL for processing an instore transaction - normally created from within the Oxipay merchant portal - as opposed to transactions created from within a shopping cart.</p>
<p>A transaction ID of <code>0</code> will result in an instance of the <code>HttpNotFoundResult</code> class being return with the message <code>Transaction Not Found</code></p>
<p>The method does a post to the Authorisation API and if the result of the authorisation is an error that it will redirect to a page the includes the code of the error as well as a message relating to it.</p>
<p>Note that the method will throw an exception that redirects to a generic error page.</p>
<h1 id="login">Login</h1>
<h2 id="constructor-summary">Constructor Summary</h2>
<p><strong>Constructor and Description</strong></p>
<p><code>LoginController()</code></p>
<h2 id="method-summary">Method Summary</h2>
<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>Modifier</th>
      <th>Method and Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>public</code></td>
      <td>
      <code>CheckToken()</code>
      <br>
      Verifies the validity of a token, returns an <code>Invalid Token</code> log warning message if the token is null or is white space.
      </td>
    </tr>
    <tr>
      <td><code>public</code></td>
      <td><code>Logout</code>
      <br>
      Processes a log out request of type <code>LougoutRequest</code>. Returns an <code>Invalid Logout Request</code> if the log out request is null, whitespace or is the default value.</td>
      </td>
    </tr>
  </tbody>
</table></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>